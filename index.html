<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Calculadora FPP para Familias</title>
<meta name="description" content="Calcula tu Fecha Probable de Parto en segundos. Por FUR (Naegele) o por ecograf√≠a.">
<meta property="og:title" content="Calculadora FPP para Familias">
<meta property="og:description" content="Tu DPP en 5 segundos ¬∑ por FUR o por ecograf√≠a">
<meta property="og:type" content="website">
<style>
  :root{
    --bg:#f9f7f4; --text:#2b2b2b; --muted:#6f6f6f; --line:#e9e4df;
    --pri:#2fbf71; --pri-700:#269a5b;
    --pA:#ffe6ef; --pB:#e8f1ff; --pRes:#fff3dd;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
       background:var(--bg); color:var(--text)}
  .wrap{max-width:980px;margin:auto;padding:22px}
  header{margin:6px 0 14px}
  .badge{display:inline-block;background:#dff7ea;border:1px solid #b9ebd0;
         color:#137a47;padding:5px 10px;border-radius:999px;font-size:.82rem}
  h1{margin:.4rem 0 .2rem;font-size:1.6rem}
  p.lead{margin:.2rem 0 1rem;color:var(--muted)}
  .grid{display:grid;gap:16px}
  @media(min-width:900px){ .grid-2{grid-template-columns:1fr 1fr} }
  .card{background:#fff;border:1px solid var(--line);border-radius:16px;
        box-shadow:0 10px 28px rgba(0,0,0,.05)}
  .in{padding:16px}
  .title{font-weight:700;margin-bottom:8px}
  .hint{font-size:.9rem;color:var(--muted);margin-top:2px}
  /* target past√≠s */
  .cardA{background:var(--pA)}
  .cardB{background:var(--pB)}
  .cardRes{background:var(--pRes)}
  label{font-size:.9rem;color:#4b4b4b}
  input[type="date"], input[type="number"]{
    width:100%;padding:12px;border:1px solid var(--line);border-radius:12px;background:#fff;
    font-size:1rem;margin-top:6px
  }
  .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  button{border:0;border-radius:12px;padding:12px 14px;cursor:pointer;font-weight:700}
  .btn{background:var(--pri);color:#fff}
  .btn:hover{background:var(--pri-700)}
  .btn-ghost{background:#f3f3f3}
  .kpis{display:grid;gap:10px;margin-top:10px}
  @media(min-width:600px){ .kpis{grid-template-columns:repeat(4,1fr)} }
  .k{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px}
  .muted{color:var(--muted);font-size:.9rem}
  footer{margin:18px 0;text-align:center}
  a{color:#246ea8;text-decoration:none}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <span class="badge">R√°pido y gratuito</span>
      <h1>Calculadora FPP para Familias</h1>
      <p class="lead">Tu fecha probable de parto en <b>segundos</b>. Por <b>FUR</b> (Naegele) o por <b>ecograf√≠a</b>. Comp√°rtela y gu√°rdala.</p>
    </header>

    <div class="grid grid-2">
      <!-- OPCI√ìN A -->
      <section class="card cardA">
        <div class="in">
          <div class="title">Opci√≥n A ‚Äî FUR (√öltima regla)</div>
          <label for="fur">FUR (AAAA-MM-DD)</label>
          <input type="date" id="fur">
          <div class="row">
            <div style="flex:1 1 180px">
              <label for="ciclo">Duraci√≥n del ciclo (d√≠as)</label>
              <input type="number" id="ciclo" min="20" max="45" value="28">
              <div class="hint">Se ajusta autom√°ticamente si tu ciclo no es de 28 d√≠as.</div>
            </div>
          </div>
          <div class="row">
            <button class="btn" onclick="calcFUR()">Calcular FPP</button>
            <button class="btn-ghost" onclick="clearFUR()">Limpiar</button>
          </div>
        </div>
      </section>

      <!-- OPCI√ìN B -->
      <section class="card cardB">
        <div class="in">
          <div class="title">Opci√≥n B ‚Äî Ecograf√≠a</div>
          <label for="ecoDate">Fecha de la eco (AAAA-MM-DD)</label>
          <input type="date" id="ecoDate">

          <div class="row" style="gap:12px">
            <div style="flex:1 1 120px">
              <label for="gaW">Semanas</label>
              <input type="number" id="gaW" min="0" max="45" placeholder="p.ej. 12">
            </div>
            <div style="flex:1 1 120px">
              <label for="gaD">D√≠as</label>
              <input type="number" id="gaD" min="0" max="6" placeholder="0‚Äì6">
            </div>
          </div>

          <div class="row">
            <button class="btn" onclick="calcECO()">Calcular FPP</button>
            <button class="btn-ghost" onclick="clearECO()">Limpiar</button>
          </div>
        </div>
      </section>
    </div>

    <!-- RESULTADOS -->
    <section class="card cardRes" style="margin-top:16px">
      <div class="in">
        <div class="title">Resultados y seguimiento</div>
        <div id="out" class="muted">Introduce los datos y pulsa ‚ÄúCalcular FPP‚Äù.</div>

        <div class="kpis" id="kpis" style="display:none">
          <div class="k"><b>DPP</b><div id="kpp"></div></div>
          <div class="k"><b>Ventana 38‚Äì42s</b><div id="kven"></div></div>
          <div class="k"><b>Gestaci√≥n hoy</b><div id="ksem"></div></div>
          <div class="k"><b>Hitos</b><div id="khitos"></div></div>
        </div>

        <div class="row" style="margin-top:12px">
          <button class="btn-ghost" onclick="copyRes()">Copiar resultado</button>
          <button class="btn-ghost" onclick="shareRes()">Compartir</button>
        </div>

        <p class="muted" style="margin-top:10px">
          La FPP es una <b>estimaci√≥n</b>. Cada embarazo es √∫nico. Ante dudas, consulta a tu profesional de salud.
        </p>
      </div>
    </section>

    <footer>
      <p class="muted">Hecho con cari√±o ¬∑ <a href="privacidad.html">Privacidad</a></p>
    </footer>
  </div>

<script>
  // utils
  const fmt = d => d.toLocaleDateString(undefined,{year:'numeric',month:'short',day:'2-digit'});
  const addDays = (d,n)=>{const x=new Date(d); x.setDate(x.getDate()+n); return x;}
  const diffDays = (a,b)=> Math.round((a-b)/(1000*60*60*24));

  function paint(dpp, base){
    const hoy = new Date();
    const diasTot = 280;
    const trans = diasTot - diffDays(dpp,hoy);
    const s = Math.max(0,Math.floor(trans/7));
    const d = Math.max(0,trans - s*7);

    const ven38 = addDays(base, 38*7);
    const ven42 = addDays(base, 42*7);
    const t2 = addDays(base, 13*7 - 1);  // ~fin S13
    const t3 = addDays(base, 28*7);      // ~inicio S28

    document.getElementById('kpp').textContent = fmt(dpp);
    document.getElementById('kven').textContent = `${fmt(ven38)} ‚Üí ${fmt(ven42)}`;
    document.getElementById('ksem').textContent = `${s} semanas ${d} d√≠as`;
    document.getElementById('khitos').textContent = `Trim2: ${fmt(t2)} ¬∑ Trim3: ${fmt(t3)}`;

    document.getElementById('kpis').style.display='';
    document.getElementById('out').textContent = 'Resultado listo ‚úÖ';
    window.__res = {
      dpp: fmt(dpp),
      v38: fmt(ven38), v42: fmt(ven42),
      semanas: s, dias: d
    };
  }

  // FUR con ajuste por ciclo
  function calcFUR(){
    const v = document.getElementById('fur').value;
    const ciclo = parseInt(document.getElementById('ciclo').value || '28',10);
    if(!v || isNaN(ciclo)){ alert('Completa FUR y duraci√≥n de ciclo'); return; }
    const fur = new Date(v);
    // Naegele: +280 d√≠as; ajuste por ciclo ‚âà (ciclo-28)
    const dpp = addDays(fur, 280 + (ciclo-28));
    paint(dpp, addDays(dpp,-280));
  }
  function clearFUR(){ document.getElementById('fur').value=''; document.getElementById('ciclo').value=28; resetOut(); }

  // ECO: DPP = eco + 280 - GA(d√≠as)
  function calcECO(){
    const ecoV = document.getElementById('ecoDate').value;
    const w = parseInt(document.getElementById('gaW').value||'0',10);
    const d = parseInt(document.getElementById('gaD').value||'0',10);
    if(!ecoV || isNaN(w) || isNaN(d)){ alert('Completa fecha de ecograf√≠a y GA (semanas/d√≠as)'); return; }
    const eco = new Date(ecoV);
    const gaDias = w*7 + d;
    const dpp = addDays(eco, 280 - gaDias);
    paint(dpp, addDays(dpp,-280));
  }
  function clearECO(){ document.getElementById('ecoDate').value=''; document.getElementById('gaW').value=''; document.getElementById('gaD').value=''; resetOut(); }

  function resetOut(){
    document.getElementById('kpis').style.display='none';
    document.getElementById('out').textContent='Introduce los datos y pulsa ‚ÄúCalcular FPP‚Äù.';
    window.__res=null;
  }

  function copyRes(){
    if(!window.__res){ alert('Calcula primero üôÇ'); return; }
    const r = window.__res;
    const txt = `DPP: ${r.dpp} ¬∑ Ventana 38‚Äì42s: ${r.v38} ‚Äì ${r.v42} ¬∑ Gestaci√≥n: ${r.semanas}s ${r.d}d`;
    navigator.clipboard.writeText(txt).then(()=>alert('Resultado copiado ‚úÖ'));
  }
  function shareRes(){
    if(!window.__res){ alert('Calcula primero üôÇ'); return; }
    const r = window.__res;
    const txt = `Mi DPP es ${r.dpp} (ventana ${r.v38}‚Äì${r.v42}). Calculado con la Calculadora FPP para Familias.`;
    if(navigator.share){ navigator.share({title:'Mi DPP', text:txt, url:location.href}); }
    else{ alert('Compartir no disponible en este dispositivo. Copia el resultado.'); }
  }
</script>
</body>
</html>
<!doctype html>
<html lang="es">
<head><meta charset="utf-8"><title>Privacidad</title></head>
<body style="font-family:system-ui;margin:40px;max-width:720px">
  <h1>Privacidad</h1>
  <p>Esta calculadora se ejecuta √≠ntegramente en tu navegador. No enviamos ni guardamos datos.</p>
  <p><a href="./">‚Üê Volver</a></p>
</body>
</html>
